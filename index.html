<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>L'ultimo giorno - Fuga dalla Terra</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: sans-serif;
      background-color: #f4f4f4;
      padding: 20px;
      margin: 0;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    #comments, #items {
      margin-top: 20px;
    }
    .comment {
      background: #f1f1f1;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
      position: relative;
    }
    .remove-btn {
      position: absolute;
      top: 5px;
      right: 10px;
      background: red;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .logo {
      display: block;
      margin: 0 auto 20px auto;
      max-width: 150px;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="qr_blog_logo_custom.png" alt="Logo" class="logo" />
    <h1>L'ultimo giorno - Fuga dalla Terra</h1>

    <div id="access-section">
      <p>Inserisci la password per accedere al blog:</p>
      <form id="access-form">
        <input type="password" id="access-password" placeholder="Password" required />
        <button type="submit">Entra</button>
      </form>
    </div>

    <div id="protected-content" style="display:none;">
      <div id="user-section">
        <p>Registrati per poter commentare:</p>
        <form id="register-form">
          <input type="text" id="username" placeholder="Inserisci il tuo nome" required />
          <button type="submit">Registrati</button>
        </form>
      </div>

      <hr />

      <div id="blog-post">
        <h2>Un mondo al collasso</h2>
        <p>
          Era l'alba dell'ultimo giorno sulla Terra. Le città erano ormai silenziose, i cieli oscurati dalle nubi tossiche e gli oceani si agitavano come se conoscessero il destino imminente. La razza umana, in preda al panico, si preparava a un esodo senza precedenti.
        </p>
        <p>
          In questo spazio voglio raccontare l'ultima speranza dell'umanità: una fuga verso le stelle, verso nuovi mondi dove poter ricominciare. Qui condividerò i pensieri, le riflessioni, i sogni e i timori che accompagnano questa transizione. Un blog per chi resta, per chi parte, e per chi vuole ricordare.
        </p>
      </div>

      <hr />

      <div id="comments-section">
        <h3>Commenti</h3>
        <div id="comments"></div>

        <form id="comment-form" style="display:none;">
          <textarea id="comment" placeholder="Scrivi il tuo commento" required></textarea>
          <button type="submit">Invia commento</button>
        </form>
      </div>

      <hr />

      <div id="what-to-bring-section">
        <h3>Cosa ti porti in viaggio?</h3>
        <div id="items"></div>

        <form id="item-form" style="display:none;">
          <textarea id="item" placeholder="Scrivi cosa porteresti con te" required></textarea>
          <button type="submit">Invia</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    const ACCESS_PASSWORD = "viaggio2025";
    const accessForm = document.getElementById("access-form");
    const accessSection = document.getElementById("access-section");
    const protectedContent = document.getElementById("protected-content");

    accessForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const password = document.getElementById("access-password").value;
      if (password === ACCESS_PASSWORD) {
        accessSection.style.display = "none";
        protectedContent.style.display = "block";
      } else {
        alert("Password errata. Riprova.");
      }
    });

    let currentUser = null;
    const registerForm = document.getElementById("register-form");
    const commentForm = document.getElementById("comment-form");
    const commentsContainer = document.getElementById("comments");
    const itemForm = document.getElementById("item-form");
    const itemsContainer = document.getElementById("items");

    const approvedComments = [];
    const approvedItems = [];

    registerForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const username = document.getElementById("username").value.trim();
      if (username) {
        currentUser = username;
        document.getElementById("user-section").innerHTML = `<p>Benvenuto, <strong>${username}</strong>!</p>`;
        commentForm.style.display = "block";
        itemForm.style.display = "block";
      }
    });

    commentForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const commentText = document.getElementById("comment").value.trim();
      if (commentText && currentUser) {
        alert("Il tuo commento è stato inviato per approvazione.");
        document.getElementById("comment").value = "";
      }
    });

    itemForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const itemText = document.getElementById("item").value.trim();
      if (itemText && currentUser) {
        alert("Il tuo contributo è stato inviato per approvazione.");
        document.getElementById("item").value = "";
      }
    });

    function renderApprovedComments() {
      commentsContainer.innerHTML = "";
      approvedComments.forEach((c, index) => {
        const div = document.createElement("div");
        div.className = "comment";
        div.innerHTML = `<strong>${c.user}</strong>: ${c.text}`;
        const removeBtn = document.createElement("button");
        removeBtn.className = "remove-btn";
        removeBtn.innerText = "Rimuovi";
        removeBtn.onclick = () => {
          approvedComments.splice(index, 1);
          renderApprovedComments();
        };
        div.appendChild(removeBtn);
        commentsContainer.appendChild(div);
      });
    }

    function renderApprovedItems() {
      itemsContainer.innerHTML = "";
      approvedItems.forEach((i, index) => {
        const div = document.createElement("div");
        div.className = "comment";
        div.innerHTML = `<strong>${i.user}</strong>: ${i.text}`;
        const removeBtn = document.createElement("button");
        removeBtn.className = "remove-btn";
        removeBtn.innerText = "Rimuovi";
        removeBtn.onclick = () => {
          approvedItems.splice(index, 1);
          renderApprovedItems();
        };
        div.appendChild(removeBtn);
        itemsContainer.appendChild(div);
      });
    }

    approvedComments.push({ user: "Marco", text: "Bell'articolo, grazie!" });
    approvedItems.push({ user: "Giulia", text: "Porterei il mio diario di viaggio." });

    renderApprovedComments();
    renderApprovedItems();
  </script>
</body>
</html>
